# MiniCDN

üöÄ –õ—ë–≥–∫–∏–π HTTP/2 CDN-—Å–µ—Ä–≤–µ—Ä —Å RAM-–∫—ç—à–µ–º, –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ zero-copy –ø–µ—Ä–µ–¥–∞—á–µ–π —Ñ–∞–π–ª–æ–≤.

## üìå –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π CDN-—Å–µ—Ä–≤–µ—Ä –Ω–∞ C++20, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ RAM-–∫—ç—à–∞, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTTP/2 –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —á–µ—Ä–µ–∑ Prometheus.

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- Zero-copy: `sendfile()` –∏–ª–∏ `io_uring` (—Ñ–∞–π–ª—ã ‚â•64KB)
- LRU-–∫—ç—à: lock-free, max 200 MB
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP/2 (—á–µ—Ä–µ–∑ `nghttp2` –∏–ª–∏ raw framing)
- Prometheus `/metrics` endpoint:
  - `minicdn_requests_total`
  - `minicdn_hit_ratio`
  - `minicdn_latency_ms`
- –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./www`

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚â•12 000 RPS (`wrk -t4 -c1000 -d30s`)
- RSS ‚â§200 MB –ø—Ä–∏ –Ω–∞–±–æ—Ä–µ —Ñ–∞–π–ª–æ–≤ ~10 GB

<p align="center">
  <img src="assets/grafana-dashboard.gif" width="600" alt="Grafana dashboard">
</p>

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

